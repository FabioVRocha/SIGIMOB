{% extends "base.html" %}

{% block title %}Visualizar Venda{% endblock %}
{% block page_title %}Visualizar Venda de Imóvel{% endblock %}

{% block content %}
<div class="bg-white p-6 rounded-lg shadow-xl">
    <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <dt class="font-semibold">Data:</dt>
            <dd>{{ venda.data_venda.strftime("%d/%m/%Y") if venda.data_venda else "-" }}</dd>
        </div>
        <div>
            <dt class="font-semibold">Comprador:</dt>
            <dd>{{ venda.cliente_nome or "-" }}</dd>
        </div>
        <div class="md:col-span-2">
            <dt class="font-semibold">Imóvel:</dt>
            <dd>
                {{ venda.endereco or "-" }}
                {% if venda.bairro %}- {{ venda.bairro }}{% endif %}
                {% if venda.cidade %}, {{ venda.cidade }}{% endif %}{% if venda.estado %}/{{ venda.estado }}{% endif %}
            </dd>
        </div>
        <div>
            <dt class="font-semibold">Valor Total:</dt>
            <dd>{{ venda.valor_total | currency }}</dd>
        </div>
        <div>
            <dt class="font-semibold">Parcelamento:</dt>
            <dd>{{ venda.quantidade_parcelas }}x de {{ venda.valor_parcela | currency }}</dd>
        </div>
        {% if venda.observacao %}
        <div class="md:col-span-2">
            <dt class="font-semibold">Observação:</dt>
            <dd class="whitespace-pre-wrap">{{ venda.observacao }}</dd>
        </div>
        {% endif %}
    </dl>

    {% if anexos %}
    <div class="mt-6 border-t pt-4">
        <h3 class="text-lg font-semibold mb-2">Anexos</h3>
        <ul class="space-y-2">
            {% for anexo in anexos %}
            <li>
                <a href="{{ url_for('imoveis_vendas_anexo_download', anexo_id=anexo.id) }}" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-paperclip mr-1"></i>{{ anexo.nome_arquivo }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <div class="flex justify-end mt-6 space-x-4">
        <a href="{{ url_for('imoveis_vendas_edit', id=venda.id) }}" class="btn-primary">Editar</a>
        <a href="{{ url_for('imoveis_vendas_list') }}" class="btn-secondary">Voltar</a>
    </div>
</div>
{% endblock %}
