<!-- templates/imoveis/loteamentos/edit.html -->
{% extends "base.html" %}

{% block body_class %}page-form-standard{% endblock %}

{% block title %}Editar Loteamento{% endblock %}

{% block page_title %}Editar Loteamento{% endblock %}

{% block content %}
<div class="form-page">
    <div class="main-header">
        <h1>Editar Loteamento</h1>
        <div class="flex space-x-3">
            <a href="{{ url_for('loteamentos_list') }}" class="btn-secondary text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out flex items-center justify-center" title="Voltar">
                <i class="fas fa-arrow-left"></i>
            </a>
        </div>
    </div>
    <div class="content-section">
        <div class="mb-6 text-sm text-gray-600">
            <div><span class="font-semibold">Imóvel:</span> {{ loteamento.endereco }}</div>
            <div><span class="font-semibold">Cidade/Estado:</span> {{ loteamento.cidade }}/{{ loteamento.estado }}</div>
        </div>

        <form action="{{ url_for('loteamentos_edit', loteamento_id=loteamento.id) }}" method="POST" enctype="multipart/form-data" class="space-y-6 flex flex-col h-full">
            <div>
                <label for="mascara_lote" class="form-label">Máscara do nome do lote *</label>
                <input type="text" id="mascara_lote" name="mascara_lote" class="form-input w-full" value="{{ loteamento.mascara_lote }}" required>
                <p class="text-xs text-gray-500 mt-1">Os nomes e endereços dos lotes serão atualizados.</p>
            </div>

            <div>
                <label for="planta_baixa" class="form-label">Planta baixa</label>
                <input type="file" id="planta_baixa" name="planta_baixa" class="form-input w-full">
                {% if loteamento.planta_nome_arquivo %}
                <p class="text-xs text-gray-500 mt-2">
                    Arquivo atual:
                    <a href="{{ url_for('loteamentos_planta', loteamento_id=loteamento.id) }}" class="text-blue-600 hover:text-blue-800">
                        {{ loteamento.planta_nome_arquivo }}
                    </a>
                </p>
                {% endif %}
            </div>

            <div class="form-footer flex flex-wrap items-center gap-3 justify-end mt-auto">
                <button type="submit" class="btn-primary px-5 py-2 rounded-lg shadow-md text-sm">
                    <i class="fas fa-save mr-2"></i> Salvar alterações
                </button>
                <a href="{{ url_for('loteamentos_list') }}" class="btn-secondary px-5 py-2 rounded-lg shadow-md text-sm">
                    <i class="fas fa-arrow-left mr-2"></i> Voltar
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
